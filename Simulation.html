<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>RIG InMoov Project: Simulation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RIG InMoov Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Simulation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Building">Building</a></li>
<li class="level1"><a href="#Usage">Usage</a></li>
<li class="level1"><a href="#Background">Background</a></li>
<li class="level1"><a href="#Debugging">Debugging</a></li>
</ul>
</div>
<div class="textblock"><p>The simulation for the RIGbot runs in ROS. It accepts commands in the same protocol described in Introduction. You must first use git to download the project, also detailed in Introdcution.</p>
<p>This section only details basic usage and slight modification. For any new features, model additions, or bug fixes, you may need to read the beginner level <a href="http://wiki.ros.org/ROS/Tutorials">ROS tutorials</a> and the <a href="http://wiki.ros.org/urdf_tutorial">urdf tutorials</a>.</p>
<h1><a class="anchor" id="Dependencies"></a>
Dependencies</h1>
<p>The simulation depends on <a href="http://www.ros.org/">ROS</a>. It is recommended you <a href="http://wiki.ros.org/jade/Installation/">install the full system</a> because of the number of the large number of ROS packages. On Ubuntu, this is achieved with the following commands. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo sh -c &#39;echo &quot;deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main&quot; &gt; /etc/apt/sources.list.d/ros-latest.list&#39;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;sudo apt-key adv --keyserver hkp://pool.sks-keyservers.net:80 --recv-key 0xB01FA116</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;sudo apt-get update</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;sudo apt-get install ros-jade-desktop-full</div></div><!-- fragment --><p> If you experience problems, please read the full wiki article.</p>
<h1><a class="anchor" id="Building"></a>
Building</h1>
<p>To build the simulation, simply run the following from the root directory of the project. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;make simulation</div></div><!-- fragment --><p>You may also want to build manually. Before running any ROS commands, you must run this command. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source /opt/ros/jade/setup.bash</div></div><!-- fragment --><p> There are also .zsh and .sh files if you are using different shells. It is recommended you append this command to your shell's .rc file (ex. ~/.bashrc).</p>
<p>The following only needs to be run once. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd catkin_ws/src</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;catkin_init_workspace</div></div><!-- fragment --><p>Finally, we can build the project. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;cd catkin_ws</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;catkin_make</div></div><!-- fragment --><h1><a class="anchor" id="Usage"></a>
Usage</h1>
<p>Before running any ROS commands relating to the project, you must run the following comand. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;source catkin_ws/devel/setup.bash</div></div><!-- fragment --><p> There are also .zsh and .sh files if you are using different shells. It is recommended you append this command to your shell's .rc file (ex. ~/.bashrc). Make sure to fill in the absolute path to rig-inmoov/catkin-ws.</p>
<p>After running all the necessary setup commands, you can finally run the project. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;roslaunch robot_description display.launch port:=/dev/ttyACM0</div></div><!-- fragment --><p> This requires that an input board such as the flex sensor glove is connected. Replace "port" with the port this board is connected on (search for the naming convention for your board online). The output from launch commands is captured in ~/.ros/log/.</p>
<p>You can also set and change the port later with the following command. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;rosparam set /serial_publisher/port /path/to/port</div></div><!-- fragment --><p> The serial publisher does not need to be running.</p>
<p>If the serial publisher crashes because it loses connection, you can re-launch it with this command. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;rosrun robot_description serial_publisher</div></div><!-- fragment --><h1><a class="anchor" id="Background"></a>
Background</h1>
<p>We have two custom programs used to maintain the simulation. The first is serial_publisher, compiled from <b>catkin_ws/src/robot_description/src/serial_publisher.cpp</b>. This program accepts input from a serial port and translates it to a <a href="http://wiki.ros.org/Topics">ROS topic</a>.</p>
<p>The other program is state_publisher, compiled from <b>state_publisher.cpp</b> in the same directory. This program listens to the topic and translates it into joint positions, which <a href="http://wiki.ros.org/rviz">rviz</a> (the visualizer component of ROS) listens to. It expects input of the same protocol as described in Introduction.</p>
<p>The modularity of these programs makes it easy to write publishers for new protocols (such as bluetooth) using just <b>serial_publisher.cpp</b> as reference. It also makes it easy to add new parts to <b>state_publisher</b>. New programs need to be added to <b>catkin_ws/src/robot_description/CMakeLists.txt</b>.</p>
<p>The rviz visualizer is loaded with a <a href="http://wiki.ros.org/urdf_tutorial">urdf</a> file, stored in <b>catkin_ws/src/robot_description/model.xml</b>, that describes how the different 3D models that make up movable parts are positionally related to one another.</p>
<h1><a class="anchor" id="Debugging"></a>
Debugging</h1>
<p>There are two example launch files used for debugging, stored in <b>catkin_ws/src/robot_description/launch</b> along with <b>display.launch</b>. The first is debug.launch, which launches state_publisher and serial_publisher in gdb, and the second, <b>memdebug.launch</b>, launches both programs in Valgrind. It is recommended that you use the three launch files as reference when modifying and creating program systems. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Feb 12 2016 14:09:19 for RIG InMoov Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
